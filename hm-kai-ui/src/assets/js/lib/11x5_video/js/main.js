$(function(){$(".eleAnimate").on("click","#mnKai",function(){k3v.tryPlay()}),$(".drawInfo").on("click","#spanbtn",function(){"soundsOn"==$("#spanbtn").attr("class")?($("#spanbtn").removeClass("soundsOn").addClass("soundsOff"),k3v.sound.stop("audioidB"),k3v.sound.stop("audioidR")):($("#spanbtn").removeClass("soundsOff").addClass("soundsOn"),"b"==audioType?(k3v.sound.play("audioidB"),k3v.sound.stop("audioidR")):(k3v.sound.play("audioidR"),k3v.sound.stop("audioidB")))}),k3v.btnStyle()});var k3v={},tryflag=!0,timer=null,audioType="b",firth11Load=!0,ifopen=!1,animateId={},dataStr={preDrawCode:[2,4,6,4,5],sumNum:12,sumBigSmall:"小",sumSingleDouble:"单",drawIssue:"170517061",preDrawTime:"2017-05-17 18:40:00"};k3v.startGame=function(n){var e=this;e.codePlay=function(){var n=$(".codeNum").find("li");e.run(-154,6,"0",n),e.run(-1370,4,"1",n),e.run(-762,10,"2",n),e.run(-1522,5,"3",n),e.run(-2,7,"4",n)},e.run=function(n,e,a,t){var i=setInterval(function(){$(t).eq(a).css("backgroundPositionY",n+"px"),(n+=e)>=-2&&(n=-1522)},e);animateId[a]=i},n&&e.codePlay(),$(".linelist").find("li").addClass("redli"),k3v.sound.stop("audioidB"),k3v.sound.play("audioidR"),audioType="r",k3v.bressBG(10)},k3v.stopGame=function(n,e){this.stop=function(n,a){if("1"==e)setTimeout(function(){clearInterval(animateId[n]);var e=$(".codeNum").find("li");$(e).eq(n).removeAttr("style"),$(e).eq(n).removeClass().addClass("num"+a)},400*n);else if("2"==e){clearInterval(animateId[n]);var t=$(".codeNum").find("li");$(t).eq(n).removeAttr("style"),$(t).eq(n).removeClass().addClass("num"+a)}};for(var a=0;a<5;a++)this.stop(a,n[a]);audioType="b",k3v.sound.play("audioidB"),k3v.sound.stop("audioidR")};var trytime=[];k3v.btnStyle=function(){$(".animate").on("mousedown","#mnKai",function(){$("#mnKai").addClass("mnKaiD")}),$(".animate").on("mouseup","#mnKai",function(){$("#mnKai").removeClass("mnKaiD")})},k3v.tryPlay=function(){var n=[],e=$(".animate");if(tryflag){$(e).find("#opening").text("模拟开奖中..."),$(".noinfor").text("模拟中..."),$("#hourtxt").hide(),$("#opening").show(),tryflag=!1,k3v.startGame(!0);var a=setTimeout(function(){for(var e=0;e<5;e++)n.push(Math.round(5*Math.random()+1));k3v.stopGame(n,"1");var t=null;$("#hourtxt").fadeIn(),$("#opening").hide(),void 0!=animateId.bressBG&&(clearInterval(animateId.bressBG),$(".manPic").find("span").eq(0).removeClass().addClass("manll"),$(".manPic").find("span").eq(1).removeClass().addClass("manrl"));var i=setTimeout(function(){for(var n=$(".codeArr").find("li"),e=[],a=0;a<5;a++)e.push($(n).eq(a).attr("class").split("code")[1]);k3v.stopGame(e,"2"),t=setTimeout(function(){tryflag=!0},2e3),trytime.push(t)},8e3);trytime.push(a),trytime.push(i)},5e3)}else $(".noinfor").fadeIn(200,"",function(){setTimeout(function(){$(".noinfor").fadeOut("300")},1e3)})},k3v.playGame=function(){$("#opening").text("正在开奖..."),$("#hourtxt").hide(),$("#opening").show(),k3v.startGame(!0)},k3v.updateData=function(n){$("#drawIssue").text(n.drawIssue),$("#drawTime").text(n.drawTime),$(n.preDrawCode).each(function(n){$(".codeArr").find("li").eq(n).removeClass().addClass("code"+this)}),$(".codeArr").find("li").eq(5).find("span").eq(0).text(n.sumNum),$(".codeArr").find("li").eq(5).find("span").eq(1).text(n.sumBigSmall),$(".codeArr").find("li").eq(5).find("span").eq(2).text(n.sumSingleDouble)},k3v.cutTime=function(n){null!=timer&&clearInterval(timer);var n=n;timer=setInterval(function(){if(n>=1){n-=1;var e=Math.floor(n/3600),a=Math.floor(n/60%60),t=Math.floor(n%60),i="";if(i=(e<10?"0"+e:e)+":",i=i+""+(a<10?"0"+a:a)+":"+(t<10?"0"+t:t),$("#hourtxt").text(i),n<10){var s=$(".linelist").find("li");$(s).eq(n).addClass("redli")}n<20&&(tryflag=!1,$(".noinfor").text("即将开奖，禁止模拟"))}else $(".noinfor").text("正在开奖，禁止模拟"),clearInterval(timer),k3v.playGame()},1e3)},k3v.clearTime=function(){clearInterval(timer)},k3v.startVideo=function(n){k3v.sound.stop("audioidB"),k3v.sound.play("audioidR"),audioType="r",k3v.updateData(n),k3v.stopGame(n.preDrawCode,"2"),k3v.cutTime(k3v.getSecond(n.preDrawTime)),setTimeout(function(){$(".animate").find(".loading").fadeOut(),firth11Load=!1},1e3)},k3v.getSecond=function(n){var e=n.split(":"),a=e[0],t=e[1],i=e[2];return 3600*(a=a<10?a.substring(a.length-1,a.length):a)+60*(t=t<10?t.substring(t.length-1,t.length):t)+1*(i=i<10?i.substring(i.length-1,i.length):i)},k3v.sound={play:function(n){"soundsOn"==$("#spanbtn").attr("class")&&ifopen&&document.getElementById(n).play()},stop:function(n){document.getElementById(n).pause()}},k3v.stopVideo=function(n){k3v.stopGame(n.preDrawCode,1),setTimeout(function(){k3v.cutTime(k3v.getSecond(n.preDrawTime)),tryflag=!0},1e3),k3v.updateData(n),$("#hourtxt").fadeIn(),$("#opening").hide(),void 0!=animateId.bressBG&&(clearInterval(animateId.bressBG),$(".manPic").find("span").eq(0).removeClass().addClass("manll"),$(".manPic").find("span").eq(1).removeClass().addClass("manrl"))},k3v.bressBG=function(n){var e=1,a=!1;void 0!=animateId.bressBG&&clearInterval(animateId.bressBG);var t=setInterval(function(){$(".bodybg").find("img").css({opacity:e}),a?(e=0,$(".manPic").find("span").eq(0).removeClass("manll").addClass("manlr"),$(".manPic").find("span").eq(1).removeClass("manrr").addClass("manrl"),a=!1):(e=1,$(".manPic").find("span").eq(1).removeClass("manrl").addClass("manrr"),$(".manPic").find("span").eq(0).removeClass("manlr").addClass("manll"),a=!0)},200);animateId.bressBG=t};